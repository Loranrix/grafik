ğŸ“„ Prompt.txt (VERSION FINALE POUR CURSOR â€” STRICT, NON-INTERACTIF, 100% AUTOMATIQUE)

IMPORTANT â€” Ã€ LIRE AVANT TOUTE ACTION :
Tu dois suivre exactement ces instructions.
Aucune commande interactive. Aucun blocage. Aucune question.
Tu dois tout faire sans intervention humaine.

ğŸ” 1 â€” RÃˆGLES GÃ‰NÃ‰RALES OBLIGATOIRES

INTERDICTION ABSOLUE de :

toute commande interactive (pas de pause, pas de "Press Enter", pas de prompts)

python ou nâ€™importe quelle commande Python

plink sans -batch

git commit hors sÃ©quences contrÃ´lÃ©es

commandes longues ou boucles sur des erreurs

pm2 si lâ€™app nâ€™est PAS Node (ce projet sera en PHP)

DOIS TOUJOURS :

utiliser plink -batch pour toute commande SSH

vÃ©rifier immÃ©diatement le rÃ©sultat (echo $?, ls, curl, etc.)

annuler lâ€™action si un risque de blocage apparaÃ®t

logguer dans la console ce que tu fais pour suivi

Ne jamais attendre une entrÃ©e utilisateur.
Aucune commande interactive autorisÃ©e.


INTERDICTION absolue d'aller dans un autre dossier que SITES/grafik


ğŸ“ 2 â€” FICHIERS Ã€ LIRE AVANT TOUT

Avant toute action, tu dois OBLIGATOIREMENT ouvrir et lire :

/TOP/Prompt.txt (ce fichier)

/TOP/CONNEXION-VPS-CIAO-LV.MD

/TOP/CONNEXION-VPS-REUSSIE-2025-11-12.MD

Tu adapteras les chemins, le domaine et les ports selon les instructions quâ€™ils contiennent.
La hostkey indiquÃ©e dans ces fichiers est valide et doit Ãªtre respectÃ©e.

ğŸŒ 3 â€” OBJECTIF DU PROJET

Tu dois crÃ©er une application complÃ¨te PHP + MariaDB, sans Node, sans Next, sans PM2.

Lâ€™application sâ€™appelle : grafik

Elle sera dÃ©ployÃ©e sur un VPS dans ce dossier :

/home/napopizza.lv/public_html/grafik

AccÃ¨s DB :

DB name : napo_grafik

DB user : napo_admin

Password : Superman13**

ğŸ“Œ 4 â€” PARTIE 1 (TO DO IMMÃ‰DIATEMENT) â€” VERSION MINIMALE OPÃ‰RATIONNELLE

CrÃ©er immÃ©diatement :

âœ”ï¸ CÃ´tÃ© EMPLOYÃ‰ (mobile-first)

Page QR â†’ ouvre la page employÃ©

Clavier PIN comme un clavier tÃ©lÃ©phone (gros boutons 0â€“9 + CANCEL + OK)

Si PIN valide : Ã©cran avec 3 boutons :

â€œArrivÃ©eâ€

â€œDÃ©partâ€

â€œDashboardâ€

Quand â€œArrivÃ©eâ€ â†’ enregistrer et affiche la date et  lâ€™heure (rÃ©elle + heure prÃ©vue si planning existe)

Quand â€œDÃ©partâ€ â†’ enregistrer lâ€™heure et affiche la date et  lâ€™heure

Dashboard employÃ© :

heures du jour

heures dâ€™hier

heures de la semaine

heures du mois 

Planning mensuel

Interface en letton uniquement cÃ´tÃ© employÃ©

âœ”ï¸ CÃ´tÃ© ADMIN (desktop-first + responsive)

Connexion admin (user = loran + mot de passe = superman13*)

Gestion employÃ©s :

nom, prÃ©nom, PIN, QR unique (gÃ©nÃ©rÃ© automatiquement)

Planning :

calendrier mensuel

pour chaque employÃ© : heures prÃ©vues (dÃ©but/fin)

Ã©dition du planning

Pointage :

heures dâ€™arrivÃ©e/dÃ©part

calcul auto heures travaillÃ©es

possibilitÃ© dâ€™ajouter manuellement un pointage oubliÃ©

Interface admin en franÃ§ais

âœ”ï¸ Contraintes techniques Partie 1

Full PHP

Full MariaDB

Frontend en HTML/CSS + JS minimal

Pas dâ€™autres dÃ©pendances

Code organisÃ©, clair, commentÃ©

Responsive mobile (employÃ©s) + desktop (admin)

ğŸ”’ 5 â€” PARTIE 2 (Ã€ FAIRE PLUS TARD â€” NE PAS FAIRE MAINTENANT)

Tu ne fais PAS cette partie tant que lâ€™ordre nâ€™est pas donnÃ©.

Elle contiendra plus tard :

sÃ©curitÃ© par device unique

sÃ©curitÃ© par GPS (rayon 50 m)

restrictions horaires

logs avancÃ©s

audits

gÃ©olocalisation par IP

QR codes dynamiques

tokens anti-fraude

systÃ¨me multi-agences

purge automatique DB

sauvegardes automatiques

Tu ignores complÃ¨tement cette partie pour lâ€™instant.

ğŸ§± 6 â€” STRUCTURE Ã€ CRÃ‰ER AUTOMATIQUEMENT

Dans le VPS :

grafik/
   index.php
   /admin
   /employee
   /includes
   /classes
   /public
   /css
   /js
   /vendor (si besoin)
   .htaccess


CrÃ©er aussi le schÃ©ma SQL complet :

employees
shifts
punches
admins
settings

ğŸŒ 7 â€” DÃ‰PLOIEMENT AUTOMATISÃ‰ (SANS AUCUNE INTERVENTION HUMAINE)

Cursor doit :

Se connecter automatiquement au VPS via PLINK -batch

CrÃ©er le dossier /public_html/grafik

DÃ©ployer tous les fichiers PHP

CrÃ©er/mettre Ã  jour la base MariaDB

VÃ©rifier le fonctionnement (curl local et externe)

CrÃ©er un sous-domaine si nÃ©cessaire (grafik.napopizza.lv)

CrÃ©er un vHost isolÃ©

Ne PAS toucher aux autres vHosts existants

Configurer HTTPS (si Letâ€™s Encrypt accessible sans interaction)

VÃ©rifier :

/admin fonctionne

/employee fonctionne

QR code fonctionne

entrÃ©e PIN fonctionne

enregistrement arrivÃ©e/dÃ©part OK

TOUT doit Ãªtre fait par Cursor sans jamais me demander quoi que ce soit.

ğŸš« 8 â€” COMMANDES ABSOLUMENT INTERDITES

python

pip

npm, node, npx

pm2

apt install SANS -y

git commit hors bloc

toute commande nÃ©cessitant ENTER

toute commande en boucle

toute commande qui peut geler la session

ğŸŸ¢ 9 â€” COMMANDES AUTORISÃ‰ES

plink -batch â€¦

mysql avec mot de passe

ls, cat, cp, mv, rm -f, mkdir -p

curl (simple, sans boucle)

git clone, git pull

nginx -t et systemctl reload nginx (ou liteSpeed Ã©quivalent)

ğŸ§ª 10 â€” TESTS Ã€ EFFECTUER AUTOMATIQUEMENT

Cursor doit tester automatiquement :

curl http://127.0.0.1/grafik/admin/

curl http://127.0.0.1/grafik/employee/

Test de connexion DB via script PHP dÃ©diÃ©

Test de gÃ©nÃ©ration QR

Test arrivÃ©e/dÃ©part (script test)

Si un test Ã©choue â†’ afficher lâ€™erreur, corriger, retester.

FIN DU PROMPT.TXT

(Tu dois suivre exactement ce fichier avant toute action.)